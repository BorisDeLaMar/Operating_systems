# SLAB аллокатор  
Создадим кэш блоков фиксированного размера, который будет:
* аллоцировать/освобождать большие регионы памяти, используя другой аллокатор
* нарезать большие регионы на блоки фиксированного размера, отслеживать их занятость и при запросе на аллокацию выдавать свободный кусок

Плюсы:
* Фиксированный размер помогает бороться с фрагментацией
* Аллокация/освобождение работают за O(1)
* Фиксированный размер блока не является проблемой, так как можно скомбинировать кеши разных размеров и построить универсальный аллокатор  
## SLAB  
* **slab** - большой регион памяти, разбивающийся на маленькие блоки фиксированного размера
* Все свободные блоки связываются в список
* Количество элементов списка и указатель на первый элемент сохраняются в заголовке, который располагается в конце slab
* SLAB аллокатор управляет слабами
  + Если у аллокатора не осталось свободных слабов со свободными объектами, аллоцирует новый и добавляет в список слабов
  + Если все объекты слаба свободны - можно освободить слаб, вернуть закэшированную память системе
  + Аллокатор поддерживает 3 списка слабов:
    - полностью свободные - нужны, чтобы оперативно вернуть системе память в случае надобности
    - частично занятые
    - занятые
  + Чтобы освободить элемент, нужно найти слаб, которому он принадлежит. Хотим по указателю найти слаб, из которого этот указатель родом
    - можем сохранить указатель на слаб рядом с аллоцированной памятью
    - можем потребовать, чтобы размер и выравнивание слаба били равны 2^i. В таком случае надо просто взять указатель и занулить его младшие i бит с помощью битовых 
операций. Это число укажет на начало слаба, а помимо этого знаем и его размер.
